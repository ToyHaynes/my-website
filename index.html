<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Davul Egzersiz Olu≈üturucu</title>
    <style>
        /* CSS - DAHA GER√áEK√áƒ∞ NOTA G√ñR√úN√úM√ú G√úNCELLEMESƒ∞ */
        :root {
            --char-width: 22px; 
            --gap-width: 22px;
            --measure-gap: 44px;
        }
        * { box-sizing: border-box; }
        body {
            font-family: 'Courier New', Courier, monospace;
            background-color: #1e1e1e;
            color: #d4d4d4;
            padding: 20px;
            display: flex;
            justify-content: center;
        }
        h3 {
            color: #4ec9b0;
            font-family: sans-serif;
        }
        .container {
            width: fit-content;
            margin: 0 auto;
        }
        
        .controls {
            margin-bottom: 20px;
        }
        .control-btn {
            background-color: #3c3c3c;
            border: 1px solid #555;
            color: #d4d4d4;
            padding: 8px 16px;
            margin-right: 10px;
            cursor: pointer;
            border-radius: 4px;
        }
        .control-btn.active {
            background-color: #094771;
            border-color: #4ec9b0;
        }

        #input-staff {
            display: grid;
            grid-template-columns: repeat(4, auto);
            gap: var(--measure-gap);
            border: 2px solid #555;
            background-color: #2d2d2d;
            border-radius: 5px;
            margin-bottom: 30px;
            padding: 20px;
        }
        .measure {
            display: flex;
            position: relative;
            width: calc(8 * var(--char-width) + var(--gap-width));
        }
        .measure:not(:last-child)::after {
            content: ''; position: absolute; height: 70%; width: 2px;
            background-color: #666; top: 15%;
            right: calc( (var(--measure-gap) / -2) - 1px );
        }
        
        .note-container {
            position: relative; width: var(--char-width); height: 80px; cursor: pointer;
        }
        .measure .note-container:nth-child(4) {
            margin-right: var(--gap-width);
        }
        .note-head {
            width: 14px; height: 11px; background-color: #d4d4d4; border-radius: 50%;
            transform: rotate(-15deg); position: absolute; top: 50px;
            left: calc(50% - 7px);
        }

        /* D√úZELTME 1: Nota sapƒ±nƒ± nota topunun saƒüƒ±na alƒ±yoruz */
        .note-stem {
            position: absolute; width: 2px; height: 35px; background-color: #d4d4d4;
            left: calc(50% + 5px); /* Merkezden saƒüa kaydƒ±rƒ±ldƒ± */
            top: 18px;
        }
        .beam {
            position: absolute; height: 4px; background-color: #d4d4d4; top: 18px;
        }

        /* D√úZELTME 2: Beam'lerin pozisyon ve geni≈ülikleri saplara g√∂re yeniden hesaplandƒ± */
        .beam.first-group {
            width: calc(3 * var(--char-width));
            left: calc(var(--char-width) / 2 + 5px);
        }
        .beam.second-group {
            width: calc(3 * var(--char-width));
            left: calc(4 * var(--char-width) + var(--gap-width) + var(--char-width) / 2 + 5px);
        }

        .accent-mark {
            position: absolute; top: 0px ;left: 5px; font-size: 24px; font-weight: bold;
            color: #4ec9b0; opacity: 0; transition: opacity 0.2s;
            width: 100%; text-align: center;
        }
        .note-container.accented .accent-mark { opacity: 1; }
        .note-container.accented .note-head { background-color: #4ec9b0; transform: rotate(-15deg) scale(1.1); }

        #output {
            background-color: #252526; padding: 20px 0; border-radius: 5px;
            width: 100%;
        }
        .output-title {
            color: #4ec9b0; font-size: 22px; padding-left: 20px;
        }
        .sticking-group-container {
            margin-bottom: 15px;
        }
        .sticking-group-container .line {
            white-space: nowrap; line-height: 2.2em; font-size: 16px;
            padding-left: 20px;
        }
        .variation-spacer {
            height: 2em;
        }
        .note, .sub-spacer, .bar-line {
            display: inline-block; text-align: center; vertical-align: middle;
        }
        .note { width: var(--char-width); }
        .sub-spacer { width: var(--gap-width); }
        .bar-line {
            width: var(--measure-gap);
            color: #dcdcaa;
            font-weight: bold;
        }
        .note.accent {
            background-color: #1f811f; color: white; font-weight: bold; text-transform: uppercase;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>ü•Å Accents & Rebounds Egzersizi</h2>
        <div class="controls">
            <button id="btn-4" class="control-btn active">4 √ñl√ß√º</button>
            <button id="btn-8" class="control-btn">8 √ñl√ß√º</button>
            <button id="btn-12" class="control-btn">12 √ñl√ß√º</button>
        </div>
        <h3>1. Melodini Olu≈ütur (Aksanlarƒ± Se√ß):</h3>
        <div id="input-staff"></div>
        <h3>2. Sonu√ß: El Sƒ±ralamalarƒ±</h3>
        <div id="output"></div>
    </div>
    <script>
    // JAVASCRIPT KODUNDA Hƒ∞√áBƒ∞R DEƒûƒ∞≈ûƒ∞KLƒ∞K YOK
    const stickingGroups = [ { title: "Single", patterns: { "R": "rlrl", "L": "lrlr" } }, { title: "Double", patterns: { "R": "rrll", "L": "llrr" } }, { title: "Inverted Double", patterns: { "R": "rllr", "L": "lrrl" } }, { title: "Paradiddle", patterns: { "R": "rlrrlrll", "L": "lrllrllr" } }, { title: "Paradiddle Inversion no:1", patterns: { "R": "rllrlrrl", "L": "lrrlrllr" } }, { title: "Paradiddle Inversion no:2", patterns: { "R": "rrlrllrl", "L": "llrllr" } }, { title: "Four Stroke Rolls", patterns: { "R": "rrrlllll", "L": "llllrrrr" } }, { title: "Single Hand Patterns", patterns: { "R": "rrrr", "L": "llll" } } ];
    const notesPerMeasure = 8;
    const notesPerRow = notesPerMeasure * 4;
    let currentTotalMeasures = 4;
    let userAccents = [];
    const staffContainer = document.getElementById('input-staff');
    const outputDiv = document.getElementById('output');
    const buttons = [ document.getElementById('btn-4'), document.getElementById('btn-8'), document.getElementById('btn-12') ];
    function renderExercise() {
        const totalNotes = notesPerMeasure * currentTotalMeasures;
        let finalHtmlOutput = ""; 
        for (const group of stickingGroups) {
            finalHtmlOutput += `<div class="sticking-group-container">`;
            finalHtmlOutput += `<h3 class="output-title">${group.title}</h3>`;
            const patternKeys = Object.keys(group.patterns);
            patternKeys.forEach((key, index) => {
                const stickingPattern = group.patterns[key];
                let fullStickingSequence = "";
                for (let i = 0; i < totalNotes; i++) {
                    fullStickingSequence += stickingPattern[i % stickingPattern.length];
                }
                let currentLineHtml = '<div class="line">';
                for (let i = 0; i < fullStickingSequence.length; i++) {
                    const note = fullStickingSequence[i];
                    const noteClass = userAccents[i] === 1 ? "note accent" : "note";
                    currentLineHtml += `<span class="${noteClass}">${note}</span>`;
                    if ((i + 1) % notesPerRow === 0 && i < totalNotes - 1) {
                        currentLineHtml += '</div>';
                        finalHtmlOutput += currentLineHtml;
                        currentLineHtml = '<div class="line">';
                    }
                    else if ((i + 1) % notesPerMeasure === 0 && i < totalNotes - 1) {
                        currentLineHtml += '<span class="bar-line">|</span>';
                    } 
                    else if ((i + 1) % 4 === 0) {
                        currentLineHtml += '<span class="sub-spacer"></span>';
                    }
                }
                currentLineHtml += '</div>';
                finalHtmlOutput += currentLineHtml;
                if(index < patternKeys.length - 1) {
                    finalHtmlOutput += '<div class="variation-spacer"></div>';
                }
            });
            finalHtmlOutput += `</div>`;
        }
        outputDiv.innerHTML = finalHtmlOutput;
    }
    function createInputStaff() {
        staffContainer.innerHTML = ''; 
        const totalNotes = notesPerMeasure * currentTotalMeasures;
        userAccents = new Array(totalNotes).fill(0);
        let noteCounter = 0;
        for (let m = 0; m < currentTotalMeasures; m++) {
            const measureDiv = document.createElement('div');
            measureDiv.classList.add('measure');
            for (let n = 0; n < notesPerMeasure; n++) {
                const noteContainer = document.createElement('div');
                noteContainer.classList.add('note-container');
                noteContainer.dataset.index = noteCounter;
                const accentMark = document.createElement('div');
                accentMark.classList.add('accent-mark');
                accentMark.innerHTML = '&gt;';
                const noteHead = document.createElement('div');
                noteHead.classList.add('note-head');
                const noteStem = document.createElement('div');
                noteStem.classList.add('note-stem');
                noteContainer.appendChild(accentMark);
                noteContainer.appendChild(noteHead);
                noteContainer.appendChild(noteStem);
                noteContainer.addEventListener('click', () => {
                    noteContainer.classList.toggle('accented');
                    const noteIndex = parseInt(noteContainer.dataset.index);
                    userAccents[noteIndex] = userAccents[noteIndex] === 0 ? 1 : 0;
                    renderExercise(); 
                });
                measureDiv.appendChild(noteContainer);
                noteCounter++;
            }
            const beam1 = document.createElement('div');
            beam1.classList.add('beam', 'first-group');
            const beam2 = document.createElement('div');
            beam2.classList.add('beam', 'second-group');
            measureDiv.appendChild(beam1);
            measureDiv.appendChild(beam2);
            staffContainer.appendChild(measureDiv);
        }
    }
    function initializeApp() {
        createInputStaff();
        renderExercise(); 
        const staffWidth = staffContainer.offsetWidth;
        outputDiv.style.width = `${staffWidth}px`;
    }
    buttons.forEach(button => {
        button.addEventListener('click', (e) => {
            buttons.forEach(btn => btn.classList.remove('active'));
            e.target.classList.add('active');
            const selectedMeasures = parseInt(e.target.id.split('-')[1]);
            currentTotalMeasures = selectedMeasures;
            initializeApp();
        });
    });
    initializeApp();
    </script>
</body>
</html>