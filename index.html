<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Drum Exercise Generator</title>
    <style>
        :root {
            /* YENƒ∞ RENK PALETƒ∞ */
            --bg-color: #423e37;
            --text-color: #edebd7;
            --primary-color: #e3b23c;
            --neutral-light: #a39594;
            --neutral-dark: #6e675f;
            --white: #ffffff;

            /* Boyut deƒüi≈ükenleri */
            --char-width: 22px; 
            --gap-width: 22px;
            --measure-gap: 44px;
        }
        * { box-sizing: border-box; }
        body {
            font-family: 'Courier New', Courier, monospace;
            background-color: var(--bg-color);
            color: var(--text-color);
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        /* --- BA≈ûLIK STƒ∞Lƒ∞ G√úNCELLEMESƒ∞ --- */
        /* h3 altƒ±ndaki √ßizgiler kaldƒ±rƒ±ldƒ±, renkler yeni palete uyarlandƒ± */
        h2 {
            color: var(--text-color);
            font-family: sans-serif;
            text-align: center;
        }
        h3 {
            color: var(--primary-color);
            font-family: sans-serif;
            border-bottom: 1px solid var(--neutral-dark); /* √áizgi yerine daha soluk bir alt kenarlƒ±k */
            padding-bottom: 8px;
        }
        
        .container {
            width: fit-content;
            margin: 0 auto;
        }
        
        .controls {
            margin-top: 15px;
            margin-bottom: 20px;
        }
        .control-btn {
            background-color: var(--neutral-dark);
            border: 1px solid var(--neutral-light);
            color: var(--text-color);
            padding: 8px 16px;
            margin-right: 10px;
            cursor: pointer;
            border-radius: 4px;
            transition: all 0.2s ease-in-out;
        }
        .control-btn:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
        .control-btn.active {
            background-color: var(--primary-color);
            border-color: var(--primary-color);
            color: var(--bg-color); /* Koyu arka plan rengi */
        }

        #input-staff {
            display: grid;
            grid-template-columns: repeat(4, auto);
            gap: var(--measure-gap);
            border: 2px solid var(--neutral-dark);
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 5px;
            margin-bottom: 30px;
            padding: 20px;
        }
        .measure {
            display: flex;
            position: relative;
            width: calc(8 * var(--char-width) + var(--gap-width));
        }
        .measure:not(:last-child)::after {
            content: ''; position: absolute; height: 70%; width: 2px;
            background-color: var(--primary-color);
            top: 15%;
            right: calc( (var(--measure-gap) / -2) - 1px );
        }
        
        .note-container {
            position: relative; width: var(--char-width); height: 80px; cursor: pointer;
        }
        .measure .note-container:nth-child(4) {
            margin-right: var(--gap-width);
        }
        .note-head {
            width: 14px; height: 11px; background-color: var(--text-color); border-radius: 50%;
            transform: rotate(-15deg); position: absolute; top: 50px;
            left: calc(50% - 7px);
        }
        .note-stem {
            position: absolute; width: 2px; height: 35px; background-color: var(--text-color);
            left: calc(50% + 5px);
            top: 18px;
            transition: background-color 0.2s;
        }
        .beam {
            position: absolute; height: 4px; background-color: var(--text-color); top: 18px;
        }
        .beam.first-group {
            width: calc(3 * var(--char-width));
            left: calc(var(--char-width) / 2 + 5px);
        }
        .beam.second-group {
            width: calc(3 * var(--char-width));
            left: calc(4 * var(--char-width) + var(--gap-width) + var(--char-width) / 2 + 5px);
        }
        .accent-mark {
            position: absolute; top: 0px ;left: 5px; font-size: 24px; font-weight: bold;
            color: var(--primary-color);
            opacity: 0; transition: opacity 0.2s;
            width: 100%; text-align: center;
        }
        .note-container.accented .accent-mark { opacity: 1; }
        .note-container.accented .note-head { background-color: var(--primary-color); transform: rotate(-15deg) scale(1.1); }
        .note-container.accented .note-stem {
            background-color: var(--primary-color);
        }

        #output {
            background-color: rgba(0, 0, 0, 0.2); 
            padding: 20px;
            border-radius: 5px;
            width: 100%;
        }
        .sticking-group-container {
            margin-bottom: 15px;
        }
        .sticking-group-container .line {
            white-space: nowrap; line-height: 2.2em; font-size: 16px;
        }
        .variation-spacer {
            height: 2em;
        }
        .note, .sub-spacer, .bar-line {
            display: inline-block; text-align: center; vertical-align: middle;
        }
        .note { width: var(--char-width); }
        .sub-spacer { width: var(--gap-width); }
        .bar-line {
            width: var(--measure-gap);
            color: var(--primary-color);
            font-weight: bold;
        }
       .note.accent {
            background-color: transparent;
            color: var(--primary-color);
            font-weight: bold;
            text-transform: uppercase;
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>ü•Å ACCENTS & REBOUNDS ULTIMATE ü•Å</h2>
        
        <h3>1. Create Melody (Choose Accents):</h3>
        
        <div class="controls">
            <button id="btn-4" class="control-btn active">4 Bar</button>
            <button id="btn-8" class="control-btn">8 Bar</button>
            <button id="btn-12" class="control-btn">12 Bar</button>
        </div>

        <div id="input-staff"></div>
        <h3>2. Stickings</h3>
        <div id="output"></div>
    </div>
    <script>
    // JavaScript kodunda hi√ßbir deƒüi≈üiklik yok
    const stickingGroups = [ { title: "Single", patterns: { "R": "rlrl", "L": "lrlr" } }, { title: "Double", patterns: { "R": "rrll", "L": "llrr" } }, { title: "Inverted Double", patterns: { "R": "rllr", "L": "lrrl" } }, { title: "Paradiddle", patterns: { "R": "rlrrlrll", "L": "lrllrllr" } }, { title: "Paradiddle Inversion no:1", patterns: { "R": "rllrlrrl", "L": "lrrlrllr" } }, { title: "Paradiddle Inversion no:2", patterns: { "R": "rrlrllrl", "L": "llrllr" } }, { title: "Four Stroke Rolls", patterns: { "R": "rrrlllll", "L": "llllrrrr" } }, { title: "Single Hand Patterns", patterns: { "R": "rrrr", "L": "llll" } } ];
    const notesPerMeasure = 8;
    const notesPerRow = notesPerMeasure * 4;
    let currentTotalMeasures = 4;
    let userAccents = [];
    const staffContainer = document.getElementById('input-staff');
    const outputDiv = document.getElementById('output');
    const buttons = [ document.getElementById('btn-4'), document.getElementById('btn-8'), document.getElementById('btn-12') ];
    function renderExercise() {
        const totalNotes = notesPerMeasure * currentTotalMeasures;
        let finalHtmlOutput = ""; 
        for (const group of stickingGroups) {
            finalHtmlOutput += `<div class="sticking-group-container">`;
            finalHtmlOutput += `<h3>${group.title}</h3>`;
            const patternKeys = Object.keys(group.patterns);
            patternKeys.forEach((key, index) => {
                const stickingPattern = group.patterns[key];
                let fullStickingSequence = "";
                for (let i = 0; i < totalNotes; i++) {
                    fullStickingSequence += stickingPattern[i % stickingPattern.length];
                }
                let currentLineHtml = '<div class="line">';
                for (let i = 0; i < fullStickingSequence.length; i++) {
                    const note = fullStickingSequence[i];
                    const noteClass = userAccents[i] === 1 ? "note accent" : "note";
                    currentLineHtml += `<span class="${noteClass}">${note}</span>`;
                    if ((i + 1) % notesPerRow === 0 && i < totalNotes - 1) {
                        currentLineHtml += '</div>';
                        finalHtmlOutput += currentLineHtml;
                        currentLineHtml = '<div class="line">';
                    }
                    else if ((i + 1) % notesPerMeasure === 0 && i < totalNotes - 1) {
                        currentLineHtml += '<span class="bar-line">|</span>';
                    } 
                    else if ((i + 1) % 4 === 0) {
                        currentLineHtml += '<span class="sub-spacer"></span>';
                    }
                }
                currentLineHtml += '</div>';
                finalHtmlOutput += currentLineHtml;
                if(index < patternKeys.length - 1) {
                    finalHtmlOutput += '<div class="variation-spacer"></div>';
                }
            });
            finalHtmlOutput += `</div>`;
        }
        outputDiv.innerHTML = finalHtmlOutput;
    }
    function createInputStaff() {
        staffContainer.innerHTML = ''; 
        const totalNotes = notesPerMeasure * currentTotalMeasures;
        userAccents = new Array(totalNotes).fill(0);
        let noteCounter = 0;
        for (let m = 0; m < currentTotalMeasures; m++) {
            const measureDiv = document.createElement('div');
            measureDiv.classList.add('measure');
            for (let n = 0; n < notesPerMeasure; n++) {
                const noteContainer = document.createElement('div');
                noteContainer.classList.add('note-container');
                noteContainer.dataset.index = noteCounter;
                const accentMark = document.createElement('div');
                accentMark.classList.add('accent-mark');
                accentMark.innerHTML = '&gt;';
                const noteHead = document.createElement('div');
                noteHead.classList.add('note-head');
                const noteStem = document.createElement('div');
                noteStem.classList.add('note-stem');
                noteContainer.appendChild(accentMark);
                noteContainer.appendChild(noteHead);
                noteContainer.appendChild(noteStem);
                noteContainer.addEventListener('click', () => {
                    noteContainer.classList.toggle('accented');
                    const noteIndex = parseInt(noteContainer.dataset.index);
                    userAccents[noteIndex] = userAccents[noteIndex] === 0 ? 1 : 0;
                    renderExercise(); 
                });
                measureDiv.appendChild(noteContainer);
                noteCounter++;
            }
            const beam1 = document.createElement('div');
            beam1.classList.add('beam', 'first-group');
            const beam2 = document.createElement('div');
            beam2.classList.add('beam', 'second-group');
            measureDiv.appendChild(beam1);
            measureDiv.appendChild(beam2);
            staffContainer.appendChild(measureDiv);
        }
    }
    function initializeApp() {
        createInputStaff();
        renderExercise(); 
        const staffWidth = staffContainer.offsetWidth;
        outputDiv.style.width = `${staffWidth}px`;
    }
    buttons.forEach(button => {
        button.addEventListener('click', (e) => {
            buttons.forEach(btn => btn.classList.remove('active'));
            e.target.classList.add('active');
            const selectedMeasures = parseInt(e.target.id.split('-')[1]);
            currentTotalMeasures = selectedMeasures;
            initializeApp();
        });
    });
    initializeApp();
    </script>
</body>
</html>